<% content_for :meta_title, 'Your account' %>

<%= render 'components/header' do %>
	<h1 class="font-serif text-4xl">Your account<br></h1>
	<% if is_native? %>
		<p class="font-serif opacity-80">Hey <%= current_user.name.first&.capitalize %>, here you can view your plan, logout and more</p>
	<% else %>
		<p class="font-serif opacity-80">Hey <%= current_user.name.first&.capitalize %>, here you can upgrade your plan, logout and more</p>
	<% end %>
<% end %>
<div class="p-4">
<div class="container">
		<% if is_native? %>
			<!-- Account settings -->
			<div class="mb-8">
				<div class="flex items-center justify-between mb-4">
					<h4 class="uppercase font-medium">Account settings</h4>
				</div>
				<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
					<%= link_to account_settings_path, class: "text-black border border-black px-6 py-4 text-center cursor-pointer inline-block uppercase w-full flex items-center justify-center font-medium" do %>
				    Go to settings
				  <% end %>
				</div>
			</div>
		<% else %>
			<!-- Plans -->
			<div class="mb-8">
				<div class="mb-4">
					<h4 class="uppercase font-medium">Your plan</h4>
					<p class="mt-0.5 opacity-50 text-sm" data-native-target="onlyNative">Subscriptions managed online</p>
				</div>
				<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
					<%= render 'accounts/free_plan' %>
					<% @plans.each do |plan| %>
						<%= render 'accounts/plan', plan: plan %>
					<% end %>
				</div>
			</div>
		<% end %>
		<!-- Logout button -->
		<div class="mb-8">
			<div class="flex items-center justify-between mb-4">
				<h4 class="uppercase font-medium">Session</h4>
			</div>
			<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
				<%= button_to destroy_user_session_path, method: :delete, class: "text-black border border-black px-6 py-4 text-center cursor-pointer inline-block uppercase w-full flex items-center justify-center font-medium" do %>
			    Logout
			  <% end %>
			</div>
		</div>
		<!-- Connect spotify -->
		<div class="mb-8">
			<div class="flex items-center justify-between mb-4">
				<h4 class="uppercase font-medium">Music</h4>
			</div>
			<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
				<% if current_user.spotify_hash %>
					<div class="relative">
						<div class="absolute -top-2 -right-2">
							<%= button_to spotify_disconnect_path, method: :delete, class: "flex items-center justify-center bg-white rounded-full h-6 px-3 text-terracotta shadow text-xs font-medium uppercase transform-gpu scale-100 hover:scale-105 active:scale-100 transition-transform duration-300 ease-out" do %>
				        <%= render 'icons/close', klass:"w-2 h-2" %>
				        <span class="ml-1">Disconnect</span>
				      <% end %>
						</div>
						<div class="text-black border border-black px-6 py-4 text-center inline-block uppercase w-full flex items-center justify-center font-medium">
							<%= render 'icons/check', klass: 'text-black h-5 w-5 mr-2' %>
							Spotify connected
						</div>
						<div style="background: #1db954;" class="p-2 border border-t-0 border-black text-center text-white text-sm flex items-center justify-center">
							<%= render 'icons/spotify', klass:'w-4 h-4 text-white mr-2' %>
							Connected to <%= current_user.spotify_user.display_name %>
						</div>
					</div>
				<% else %>
					<%= link_to spotify_login_path, method: :post, class: "text-black border border-black px-6 py-4 text-center cursor-pointer inline-block uppercase w-full flex items-center justify-center font-medium" do %>
				    Connect your spotify
				  <% end %>
				<% end %>
			</div>
		</div>
		<!-- Contact -->
		<div class="mb-8">
			<div class="flex items-center justify-between mb-4">
				<h4 class="uppercase font-medium">Contact</h4>
			</div>
			<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
				<%= link_to contact_path, class: "text-black border border-black px-6 py-4 text-center cursor-pointer inline-block uppercase w-full flex items-center justify-center font-medium" do %>
			    Get in touch
			  <% end %>
			</div>
		</div>
		<!-- Terms & Privacy -->
		<div>
			<div class="flex items-center justify-between mb-4">
				<h4 class="uppercase font-medium">Policies</h4>
			</div>
			<div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3">
				<%= link_to terms_path, class: "text-black border border-black px-6 py-4 text-center cursor-pointer inline-block uppercase w-full flex items-center justify-center font-medium" do %>
			    Terms & Conditions
			  <% end %>
			  <%= link_to privacy_path, class: "text-black border border-black px-6 py-4 text-center cursor-pointer inline-block uppercase w-full flex items-center justify-center font-medium" do %>
			    Privacy policy
			  <% end %>
			</div>
		</div>
	</div>
</div>